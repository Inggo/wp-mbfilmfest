(function(e){function t(t){for(var n,l,o=t[0],a=t[1],c=t[2],m=0,f=[];m<o.length;m++)l=o[m],Object.prototype.hasOwnProperty.call(s,l)&&s[l]&&f.push(s[l][0]),s[l]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n]);u&&u(t);while(f.length)f.shift()();return r.push.apply(r,c||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],n=!0,o=1;o<i.length;o++){var a=i[o];0!==s[a]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=i[0]))}return e}var n={},s={app:0},r=[];function l(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=e,l.c=n,l.d=function(e,t,i){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(i,n,function(t){return e[t]}.bind(null,n));return i},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],a=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=a;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"034f":function(e,t,i){"use strict";i("85ec")},1774:function(e,t,i){"use strict";i("7a42")},"4bc4":function(e,t,i){"use strict";i("bc13")},"56d7":function(e,t,i){"use strict";i.r(t);i("e260"),i("e6cf"),i("cca6"),i("a79d");var n=i("2b0e"),s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mbfilmfest_container"},[i("MBFFBanners",{attrs:{banners:e.contents.primaryBanners}}),i("MBFFContents",{attrs:{films:e.contents.films}}),i("MBFFBanners",{attrs:{banners:e.contents.secondaryBanners}}),i("MBFFLinks",{attrs:{links:e.primaryLinks,title:e.settings.primaryLinksTitle,description:e.settings.primaryLinksDescription,background:e.settings.primaryLinksBackground,layout:e.settings.primaryLinksFormat,showNames:e.settings.showPrimaryLinkNames}}),i("MBFFLinks",{attrs:{links:e.secondaryLinks,title:e.settings.secondaryLinksTitle,description:e.settings.secondaryLinksDescription,background:e.settings.secondaryLinksBackground,layout:e.settings.secondaryLinksFormat,showNames:e.settings.showSecondaryLinkNames}})],1)},r=[],l=(i("4de4"),i("caad"),i("2532"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"mbfilmfest_banners",attrs:{id:"mbfilmfest_banners"}},[i("VueAgile",{directives:[{name:"show",rawName:"v-show",value:e.windowLoaded,expression:"windowLoaded"}],ref:"carousel",class:{mbfilmfest_banner_carousel:this.banners.length>1},style:{height:e.currentSlideHeight},attrs:{autoplay:e.isCarousel},on:{"before-change":function(t){return e.setContainerDimensions(t)}}},e._l(e.banners,(function(t,n){return i("div",{key:t.id,ref:"slides",refInFor:!0,class:{mbfilmfest_banner:!0,"has-link":t.link},style:{backgroundColor:t.background}},[i("img",{ref:"bannerImages",refInFor:!0,style:e.slideDimensions[n],attrs:{src:t.image},on:{click:function(i){return e.goToLink(t.link,t.newWindow)}}})])})),0)],1)}),o=[],a=i("f7ab"),c={name:"MBFFBanners",components:{VueAgile:a["a"]},props:{banners:Array},data:function(){return{windowLoaded:!1,currentSlideWidth:0,currentSlideHeight:0,sliderOptions:{autoplaySpeed:6e3,centerMode:!0,responsive:[{breakpoint:600,settings:{navButtons:this.banners.length>1,dots:!1}},{breakpoint:900,settings:{navButtons:this.banners.length>1,dots:this.banners.length>1}}]},slideDimensions:[]}},computed:{isCarousel:function(){return this.banners.length>1}},methods:{setSlideDimensions:function(){for(var e=[],t=0;t<this.banners.length;t++){var i=this.banners[t];i.width<=document.documentElement.clientWidth&&i.height<=document.documentElement.clientHeight?e.push({width:i.width+"px",height:i.height+"px"}):e.push({width:document.documentElement.clientWidth+"px",height:i.height/(i.width/document.documentElement.clientWidth)+"px"})}this.slideDimensions=e},setContainerDimensions:function(e){this.currentSlideWidth=this.slideDimensions[e.nextSlide].width,this.currentSlideHeight=this.slideDimensions[e.nextSlide].height},goToLink:function(e){e&&""!=e&&window.open(e)}},mounted:function(){var e=this;this.$nextTick((function(){window.addEventListener("load",(function(){e.windowLoaded=!0,e.setSlideDimensions(),e.$nextTick((function(){e.$refs.carousel.goTo(0),e.currentSlideWidth=e.slideDimensions[0].width,e.currentSlideHeight=e.slideDimensions[0].height,e.$refs.carousel.reload()})),window.addEventListener("resize",(function(){e.setSlideDimensions(),e.$nextTick((function(){e.setContainerDimensions({nextSlide:0}),e.$refs.carousel.reload(),e.$refs.carousel.goTo(0)}))}))}))}))}},u=c,m=(i("1774"),i("2877")),f=Object(m["a"])(u,l,o,!1,null,null,null),d=f.exports,h=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("main",{staticClass:"mbfilmfest_body",attrs:{id:"mbfilmfest_body"}},[i("MBFFFilmList",{ref:"featureFilms",attrs:{title:"Feature Films",layout:"featured",films:e.featuredFilms},on:{"film-focused":function(t){return e.$refs.shortFilms.unfocusFilm()}}}),i("MBFFFilmList",{ref:"shortFilms",attrs:{title:"Short Films",films:e.shortFilms},on:{"film-focused":function(t){return e.$refs.featureFilms.unfocusFilm()}}})],1)},p=[],g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{class:["mbfilmfest_films","featured"==e.layout?"mbfilmfest_featurefilms":"mbfilmfest_shortfilms"]},[i("h3",[e._v(e._s(e.title))]),i("ul",e._l(e.films,(function(t){return i("li",{key:t.id,ref:"films",refInFor:!0,class:{mbfilmfest_focused_film:e.focusedOnFilm==t.id,mbfilmfest_film_preload:!e.filmLoaded.includes(t.id),mbfilmfest_film_loaded:e.filmLoaded.includes(t.id),mbfilmfest_film_playable:e.isFilmPlayable(t)},on:{mouseenter:function(i){!e.isMobile&&e.setFocusFilm(t)},mouseleave:function(t){!e.isMobile&&e.unfocusFilm()}}},[i("div",{staticClass:"mbfilmfest_filmcover_container",style:{height:e.filmcoverHeight+"px"},on:{click:function(i){return e.selectFilm(t)}}},[i("div",{staticClass:"mbfilmfest_filmcover",style:{backgroundImage:"url("+t.image+")"}})]),i("div",{staticClass:"mbfilmfest_description_container",on:{click:function(i){return e.selectFilm(t)}}},[i("h4",[e._v(e._s(t.title))]),t.screening_time?i("p",{staticClass:"mbfilmfest_description_screentime"},[e._v(e._s(t.screening_time))]):e._e(),i("p",{domProps:{innerHTML:e._s(t.description)}}),e.isFilmPlayable(t)?i("p",{staticClass:"mbfilmfest_watch_now"},[i("a",{attrs:{href:"#"},on:{click:function(i){return i.preventDefault(),e.playFocusedFilm(t)}}},[e._v("Watch Now")])]):e._e()]),e.isFilmPlayable(t)?i("div",{staticClass:"mbfilmfest_play_button",style:{backgroundImage:"url("+e.baseUrl+"play.svg)",height:e.filmcoverHeight+"px"},on:{click:function(i){return i.stopPropagation(),e.playFocusedFilm(t)}}}):e._e()])})),0),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.playing,expression:"playing"}],staticClass:"mbfilmfest_player"},[i("div",{staticClass:"mbfilmfest_player_viewport"},[i("button",{staticClass:"mbfilmfest_close_player",on:{click:e.stopFilm}},[e._v("Ã—")]),i("div",{staticClass:"mbfilmfest_embed",domProps:{innerHTML:e._s(e.currentEmbed)}})])])])],1)},b=[],y=(i("d3b7"),i("d81d"),i("159b"),i("8df8")),F={props:{title:String,films:Array,layout:{type:String,default:"basic"}},data:function(){return{timeApi:window.mbfilmfest.timeApiUrl,currentTime:null,focusedFilmIsPlayable:!1,focusedOnFilm:!1,playing:!1,currentEmbed:"",filmLoaded:[],filmHeights:[],filmcoverHeight:0,baseUrl:window.mbfilmfest.baseUrl+"src/assets/"}},computed:{defaultHeight:function(){var e=document.documentElement.clientWidth<1366?105:118;return this.filmcoverHeight+e+"px"},isMobile:function(){return y()}},methods:{updateCurrentTime:function(){var e=this;fetch(this.timeApi).then((function(e){return e.json()})).then((function(t){console.log("Updated current time to ",t),e.currentTime=t})).catch((function(e){console.log(e)}))},isFilmPlayable:function(e){var t=new Date(this.currentTime),i=e.startTime?new Date(e.startTime):null,n=e.endTime?new Date(e.endTime):null;return(!i||i.getTime()<=t.getTime())&&(!n||n.getTime()>=t.getTime())},calculateFilmcoverHeight:function(){var e=0;e=document.documentElement.clientWidth<500?"featured"==this.layout?1.44385*document.documentElement.clientWidth:document.documentElement.clientWidth/1.77776:document.documentElement.clientWidth<800?"featured"==this.layout?1.44385*document.documentElement.clientWidth/2:document.documentElement.clientWidth/1.77776/2:"featured"==this.layout?540:191,this.filmcoverHeight=e},playFocusedFilm:function(e){if(this.focusedOnFilm==e.id)return this.playFilm(e.embed)},setFocusFilm:function(e){var t=this;this.updateCurrentTime(),this.unfocusFilm(),this.focusedOnFilm=e.id,this.$refs.films[this.filmLoaded.indexOf(e.id)].style.height=this.filmHeights[this.filmLoaded.indexOf(e.id)]+"px",this.isFilmPlayable(e)&&(this.focusedFilmIsPlayable=!0),this.isMobile&&setTimeout((function(){if(!t.focusedOnFilm!=e.id){var i=24,n=t.films.map((function(e){return e.id})).indexOf(e.id),s=window.pageYOffset||document.documentElement.scrollTop,r=t.$refs.films[n],l=r.offsetHeight,o=s;if(l>window.innerHeight){var a=r.querySelector(".mbfilmfest_description_container");a.offsetHeight>window.innerHeight?o+=a.getBoundingClientRect().top-i:o+=r.getBoundingClientRect().bottom-window.innerHeight+i}else o+=r.getBoundingClientRect().top-i;window.scroll({top:o,behavior:"smooth"})}}),125),this.$emit("film-focused",e)},unfocusFilm:function(){this.focusedOnFilm=!1,this.focusedFilmIsPlayable=!1;for(var e=0;e<this.$refs.films.length;e++)this.$refs.films[e].style.height=this.defaultHeight},selectFilm:function(e){return this.isMobile?this.focusedOnFilm==e.id?this.unfocusFilm(e):this.setFocusFilm(e):this.playFilm(e.embed)},playFilm:function(e){if(!this.focusedFilmIsPlayable)return!1;document.body.classList.add("mbfilmfest_film_playing"),this.currentEmbed=atob(e),this.playing=!0},stopFilm:function(){document.body.classList.remove("mbfilmfest_film_playing"),this.currentEmbed=null,this.playing=!1}},mounted:function(){var e=this;this.updateCurrentTime(),this.$nextTick((function(){e.calculateFilmcoverHeight(),e.$nextTick((function(){e.films.forEach((function(t,i){e.filmHeights.push(e.$refs.films[i].clientHeight)})),e.$nextTick((function(){e.films.forEach((function(t,i){e.$refs.films[i].style.height=e.defaultHeight,e.filmLoaded.push(t.id)}))}))}))}))}},_=F,v=(i("4bc4"),Object(m["a"])(_,g,b,!1,null,null,null)),k=v.exports,w={name:"MBFFContents",props:{films:Array},components:{MBFFFilmList:k},computed:{featuredFilms:function(){return this.films?this.films.filter((function(e){return e.tags.includes("Feature Films")})):[]},shortFilms:function(){return this.films?this.films.filter((function(e){return e.tags.includes("Short Films")})):[]}}},L=w,x=(i("d9eb"),Object(m["a"])(L,h,p,!1,null,null,null)),T=x.exports,C=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mbfilmfest_links_container",style:{backgroundColor:e.background}},[i("section",{staticClass:"mbfilmfest_links",class:"instax"==e.layout?"mbfilmfest_links_instax":null},[i("div",{staticClass:"mbfilmfest_links_description"},[e.title?i("h3",[e._v(e._s(e.title))]):e._e(),e.description?i("div",{domProps:{innerHTML:e._s(e.description)}}):e._e()]),i("div",{staticClass:"mbfilmfest_links_contents"},[i("ul",e._l(e.links,(function(t){return i("li",{key:t.id,ref:t.id,refInFor:!0,style:"instax"==e.layout?e.randomRot():null,on:{click:function(i){return e.goToLink(t.link)}}},[i("img",{attrs:{src:t.image,alt:t.name}}),e.showNames?i("h4",[e._v(e._s(t.name))]):e._e()])})),0)])])])},S=[],M={props:{showNames:{type:Boolean,default:!0},title:String,description:String,links:Array,background:{type:String,default:"#FFF"},layout:String},methods:{goToLink:function(e){e&&window.open(e)},randomRot:function(){return"transform: "+this.randomRotValue()},randomRotValue:function(){return"rotate("+5*Math.random()*(Math.random()<.5?1:-1)+"deg)"}}},O=M,B=(i("9db0"),Object(m["a"])(O,C,S,!1,null,null,null)),H=B.exports,E={name:"App",components:{MBFFBanners:d,MBFFContents:T,MBFFLinks:H},data:function(){return window.mbfilmfest},computed:{primaryLinks:function(){var e=this;return this.settings.primaryLinksFilter?this.contents.links.filter((function(t){return t.tags.includes(e.settings.primaryLinksFilter)})):this.contents.links},secondaryLinks:function(){var e=this;return this.settings.secondaryLinksFilter?this.contents.links.filter((function(t){return t.tags.includes(e.settings.secondaryLinksFilter)})):this.contents.links}}},$=E,P=(i("034f"),Object(m["a"])($,s,r,!1,null,null,null)),D=P.exports;n["a"].config.productionTip=!1,new n["a"]({render:function(e){return e(D)}}).$mount("#mbfilmfest_view")},"7a42":function(e,t,i){},"85ec":function(e,t,i){},"9db0":function(e,t,i){"use strict";i("c072")},ae57:function(e,t,i){},bc13:function(e,t,i){},c072:function(e,t,i){},d9eb:function(e,t,i){"use strict";i("ae57")}});
//# sourceMappingURL=app.js.map